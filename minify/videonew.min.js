const wrapper=document.querySelector(".wrapper"),imageMusic=document.querySelector(".wrapper-img video"),musicImg=document.querySelector(".profile-img img"),musicName=document.querySelector(".profile-name a"),musicArtist=document.querySelector(".profile-name p"),playPauseBtn=document.querySelector(".play-pause-btn"),nextBtn=document.querySelector("#next"),prevBtn=document.querySelector("#prev"),progressBar=document.querySelector(".progress-bar-fill"),progressArea=document.querySelector(".progress-bar"),shuffleBtn=document.querySelector("#shuffle"),centerPlayPause=document.querySelector(".center .play-pause"),topFull=document.querySelector(".top .play-pause .full"),topMini=document.querySelector(".top .play-pause .mini-play"),lyricsMusic=document.querySelector(".lyrics-content");let musicIndex=Math.floor(Math.random()*allMusic.length+1);function loadMusic(indexNumb){musicName.innerText=allMusic[indexNumb-1].name,musicArtist.innerText=allMusic[indexNumb-1].artist,imageMusic.src=`videos/${allMusic[indexNumb-1].src}.mp4`,imageMusic.poster=`images/${allMusic[indexNumb-1].src}.webp`,musicImg.src=`images/${allMusic[indexNumb-1].src}.webp`,lyricsMusic.innerText=allMusic[indexNumb-1].lyrics}isMusicPaused=!0,window.addEventListener("load",()=>{loadMusic(musicIndex),playingSong()});const ulTag=wrapper.querySelector("ol");for(let i=0;i<allMusic.length;i++){let liTag=`<li class="cepat" li-index="${i+1}" id="main-${i+1}">\n                    <div class="hover-play">\n                        <img src="images/${allMusic[i].src}.webp" alt="" width="40px">\n                        <div class="middle">\n                            <div class="play-pause">\n                                <i class="material-icons-sharp play">play_arrow</i>\n                            </div>\n                        </div>\n                    </div>\n                    <span class="text">\n                        <p class="name">${allMusic[i].name}</p>\n                        <p class="artist">${allMusic[i].artist}</p>\n                    </span>\n                    <span id="${allMusic[i].src}" class="audio-duration">0:00</span>\n\t\t\t\t\t<span class="material-icons-outlined more"> more_vert </span>\n\t\t\t\t\t<audio  class="${allMusic[i].src}" src="videos/${allMusic[i].src}.mp4"></audio>\n                </li>`;ulTag.insertAdjacentHTML("beforeend",liTag);let liAudioDuartionTag=ulTag.querySelector(`#${allMusic[i].src}`),liAudioTag=ulTag.querySelector(`.${allMusic[i].src}`);liAudioTag.addEventListener("loadeddata",()=>{let duration=liAudioTag.duration,totalMin=Math.floor(duration/60),totalSec=Math.floor(duration%60);totalSec<10&&(totalSec=`0${totalSec}`),liAudioDuartionTag.innerText=`${totalMin}:${totalSec}`,liAudioDuartionTag.setAttribute("t-duration",`${totalMin}:${totalSec}`)})}function playingSong(){const allLiTag=ulTag.querySelectorAll("li");for(let j=0;j<allLiTag.length;j++){let audioTag=allLiTag[j].querySelector(".audio-duration"),paused=allLiTag[j].querySelector(".play"),Bright=allLiTag[j].querySelector(".middle"),imagePlay=allLiTag[j].querySelector(".hover-play img");if(allLiTag[j].classList.contains("playing")){allLiTag[j].classList.remove("playing"),"play_arrow"==paused.innerText?paused.innerText="play_arrow":paused.innerText="pause",Bright.style.opacity="0";let adDuration=audioTag.getAttribute("t-duration");audioTag.innerText=adDuration,imagePlay.style.opacity="1"}allLiTag[j].getAttribute("li-index")==musicIndex&&(allLiTag[j].classList.add("playing"),audioTag.innerText="Playing",Bright.style.opacity="1",imagePlay.style.opacity="0.5","pause"==paused.innerText?paused.innerText="play_arrow":paused.innerText="pause"),allLiTag[j].setAttribute("onclick","clicked(this)")}}function clicked(element){let getLiIndex=element.getAttribute("li-index");musicIndex=getLiIndex,loadMusic(musicIndex),playMusic(),playingSong()}function playMusic(){wrapper.classList.add("paused"),playPauseBtn.querySelector("i").innerText="pause",centerPlayPause.querySelector("i").innerText="pause",imageMusic.play()}function pauseMusic(){wrapper.classList.remove("paused"),playPauseBtn.querySelector("i").innerText="play_arrow",centerPlayPause.querySelector("i").innerText="play_arrow",imageMusic.pause()}function prevMusic(){musicIndex--,musicIndex=musicIndex<1?allMusic.length:musicIndex,loadMusic(musicIndex),playMusic(),playingSong()}function nextMusic(){musicIndex++,musicIndex=musicIndex>allMusic.length?1:musicIndex,loadMusic(musicIndex),playMusic(),playingSong()}playPauseBtn.addEventListener("click",(function(){isMusicPlay=wrapper.classList.contains("paused"),isMusicPlay?pauseMusic():playMusic(),playingSong()})),imageMusic.addEventListener("click",(function(){isMusicPlay=wrapper.classList.contains("paused"),isMusicPlay?pauseMusic():playMusic()})),centerPlayPause.addEventListener("click",(function(){isMusicPlay=wrapper.classList.contains("paused"),isMusicPlay?pauseMusic():playMusic()})),prevBtn.addEventListener("click",()=>{prevMusic()}),nextBtn.addEventListener("click",()=>{nextMusic()});var isPlaying=!1;function PlayPauseNow(){isPlaying?imageMusic.pause():imageMusic.play()}imageMusic.onplaying=function(){isPlaying=!0},imageMusic.onpause=function(){isPlaying=!1},imageMusic.addEventListener("timeupdate",e=>{const currentTimes=e.target.currentTime,duration=e.target.duration;let progressWidth=currentTimes/duration*100;progressBar.style.width=`${progressWidth}%`;let musicCurrentTime=document.querySelector(".current-time"),musicDuartion=document.querySelector(".max-duration");imageMusic.addEventListener("loadeddata",()=>{let mainAdDuration=imageMusic.duration,totalMin=Math.floor(mainAdDuration/60),totalSec=Math.floor(mainAdDuration%60);totalSec<10&&(totalSec=`0${totalSec}`),musicDuartion.innerText=`${totalMin}:${totalSec}`});let currentMin=Math.floor(currentTimes/60),currentSec=Math.floor(currentTimes%60);currentSec<10&&(currentSec=`0${currentSec}`),musicCurrentTime.innerText=`${currentMin}:${currentSec}`}),progressArea.addEventListener("click",e=>{let progressWidth=progressArea.clientWidth,clickedOffsetX=e.offsetX,songDuration=imageMusic.duration;imageMusic.currentTime=clickedOffsetX/progressWidth*songDuration,playMusic(),playingSong()});const repeatBtn=document.querySelector("#repeat");repeatBtn.addEventListener("click",()=>{let getText;switch(repeatBtn.innerText){case"repeat":repeatBtn.innerText="repeat_one",repeatBtn.setAttribute("title","Repeat one");break;case"repeat_one":repeatBtn.innerText="repeat",repeatBtn.setAttribute("title","Repeat")}}),imageMusic.addEventListener("ended",()=>{let getText;switch(repeatBtn.innerText){case"repeat":nextMusic();break;case"repeat_one":imageMusic.currentTime=0,loadMusic(musicIndex),playMusic()}}),shuffleBtn.addEventListener("click",()=>{let randIndex=Math.floor(Math.random()*allMusic.length+1);do{randIndex=Math.floor(Math.random()*allMusic.length+1)}while(musicIndex==randIndex);musicIndex=randIndex,loadMusic(musicIndex),playMusic(),playingSong()});const volumeBtn=document.querySelector("#repeat-plist");volumeBtn.addEventListener("click",()=>{let getText;switch(volumeBtn.innerText){case"volume_up":volumeBtn.innerText="volume_down",volumeBtn.setAttribute("title","Volume 50%"),imageMusic.volume=.4;break;case"volume_mute":volumeBtn.innerText="volume_off",volumeBtn.setAttribute("title","Muted"),imageMusic.volume=0;break;case"volume_down":volumeBtn.innerText="volume_mute",volumeBtn.setAttribute("title","volume 0%"),imageMusic.volume=.2;break;case"volume_off":volumeBtn.innerText="volume_up",volumeBtn.setAttribute("title","Volume 100%"),imageMusic.volume=.8}});var showSrc=document.querySelector(".hidden-input");showSrc.addEventListener("click",()=>{var hide=document.getElementById("input");hide.style.display,hide.style.display="none";var link=document.getElementById("link");link.style.display,link.style.display="flex"});var hiddenSrc=document.querySelector(".open-input");hiddenSrc.addEventListener("click",()=>{var hide=document.getElementById("input");hide.style.display,hide.style.display="flex";var link=document.getElementById("link");link.style.display,link.style.display="none"});var logo1=document.querySelector("#logo-1"),logo2=document.querySelector("#logo-2");logo1.addEventListener("click",()=>{logo1.style.display="none",logo2.style.display="block"},2e3),logo2.addEventListener("click",()=>{logo1.style.display="block",logo2.style.display="none"},2e3);var prevScrollpos=window.pageYOffset;window.onscroll=function(){var currentScrollPos=window.pageYOffset;document.getElementById("navbar").style.borderBottom=prevScrollpos>currentScrollPos?"none":"0.5px solid rgb(41, 39, 39)",prevScrollpos=currentScrollPos},topFull.addEventListener("click",()=>{imageMusic.requestFullscreen?imageMusic.requestFullscreen():imageMusic.webkitRequestFullscreen?imageMusic.webkitRequestFullscreen():imageMusic.msRequestFullscreen&&imageMusic.msRequestFullscreen()}),topMini.addEventListener("click",()=>{document.pictureInPictureElement?document.exitPictureInPicture():document.pictureInPictureEnabled&&imageMusic.requestPictureInPicture()}),$(document).ready((function(){$(".music-link a").click((function(){$(".music-link a").removeClass("active"),$(this).addClass("active");var id=$(this).data("id");$(".tab-content").hide(),$(`[data-content=${id}]`).fadeIn(200)}))}));